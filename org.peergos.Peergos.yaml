app-id: org.peergos.Peergos
runtime: org.gnome.Platform
runtime-version: "46"

sdk: org.freedesktop.Sdk//23.08

sdk-extensions:
  - org.freedesktop.Sdk.Extension.openjdk21

command: peergos

finish-args:
  - --share=network

  - --socket=x11
  - --socket=wayland

modules:
  - name: peergos
    buildsystem: simple
    build-commands:
      - install -Dm644 Peergos.jar /app/share/peergos/Peergos.jar

      - install -Dm755 peergos.sh /app/bin/peergos

      - install -Dm644 org.peergos.Peergos.desktop /app/share/applications/org.peergos.Peergos.desktop

      - install -Dm644 peergos.svg /app/share/icons/hicolor/256x256/apps/org.peergos.Peergos.svg

      - install -Dm644 org.peergos.Peergos.metainfo.xml /app/share/metainfo/org.peergos.Peergos.metainfo.xml

    sources:
      - type: file
        url: http://localhost:9999/Peergos.jar
        sha256: ec189aeb37de718981cbf88aac73394b26e51d2cb344d40be2c52abd672acc96

      - type: file
        path: peergos.sh

      - type: file
        path: org.peergos.Peergos.desktop

      - type: file
        path: peergos.svg

      - type: file
        path: org.peergos.Peergos.metainfo.xml

